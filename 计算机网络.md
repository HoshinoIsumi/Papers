# 计算机网络


## 一、计算机网络概论


### 概念


#### 计算机网络的定义


##### 将地理位置不同的独立计算机通过通讯线路实现资源共享


###### 答题要素：独立计算机-通信线路连接-实现资源共享


#### 计算机网络的组成


##### 通讯子网


###### 提供信息交换的网络节点和通讯线路


##### 终端系统/资源子网


###### 提供共享的软件资源和硬件资源


#### 计算机网络的类型


##### 按照拓扑结构分类


###### 星型


###### 树型


###### 总线型


###### 环型


###### 网状


##### 按照范围分类


###### 局域网 LAN


###### 城域网 MAN


###### 广域网 WAN


###### 补充


- 个人区域网 PAN

- 互联网 Internet

##### 按照传输方式分类


###### 无线网络


- IEEE802.11

- WLAN 无线局域网（wireless）

- WPAN 无线个域网

###### 有线网络


- IEEE802.3

### 体系结构


#### 传输方式


##### 按照传输方向区分


###### 单工


- 只能单方向传输的工作模式

###### 双工


- 在同一时间，线路上只允许一个方向的数据通过

###### 全双工


- 双方可以同时进行数据传输

##### 按照传输对象区分


###### 单播


- 1对1 

###### 多播


- 1对多

###### 广播


- 1对ALL

#### 数据交换


##### 电路交换


###### 形式：
在通信开始前，建立一条专用的物理连接。
该连接在通信期间保持独占，直至通信结束。


###### 优点：
提供持续和稳定的带宽。
延迟低，适合实时通信（如电话）。


###### 缺点：
资源利用率低，线路空闲时仍占用资源。
建立连接时间较长，不适合突发数据传输。


##### 报文交换


###### 形式：
整个报文作为一个整体，通过存储转发的方式传输。
每个节点接收整个报文，然后转发给下一个节点。


###### 优点：
无需建立专用连接，资源利用率较高。
信道使用效率高，适合大数据量传输。


###### 缺点：
存储转发导致延迟较高。
报文大小受限于节点存储能力。


##### 分组交换


###### 形式：
将数据拆分成较小的分组（数据包）进行传输。
每个分组独立传输，可能通过不同路径到达目的地。


###### 优点：
高效利用网络资源，适合突发数据和多用户共享。
具备鲁棒性，网络故障时可自动选择其他路径。


- 鲁棒性指的是系统在面对变化或不确定性时维持其功能和性能的能力。在网络通信中，鲁棒性通常意味着网络能够在出现故障、拥塞或恶劣条件时，仍然保持数据传输的可靠性和效率。

###### 缺点：
可能产生分组乱序和延迟抖动。
需要额外的协议来确保可靠性和顺序。


#### 传输协议和体系结构


##### 网络协议的三要素


###### 语法


###### 语意


###### 时序


##### OSI 参考模型（开放式系统互联模型）七层


###### 应用层


- 提供用户接口和应用服务。

- 负责确定通信伙伴的身份和可访问性。

- 处理高层协议、表示和会话管理。

- 典型协议包括：HTTP（用于网页）、SMTP（用于电子邮件）、FTP（用于文件传输）。

###### 表示层


- 数据格式化：将数据转换为应用层可接受的格式。

- 加密、解密：提供数据的安全性。

- 数据压缩：减少数据大小以提高传输效率。

- 常见格式和标准包括：JPEG（图像）、MPEG（视频）、TLS/SSL（加密）。

###### 会话层


- 管理和控制会话（连接）。

- 负责会话建立、维护和终止。

- 提供全双工、半双工、单工数据传输。

- 会话层协议包括：NetBIOS、PPTP。

###### 传输层 - 段(Segment，TCP)或 数据报(Datagram，UDP)


- 提供节点到节点的数据传输。

- 负责数据帧的创建、传输和接收。

- 进行错误检测和纠正。

- 数据链路层协议包括：Ethernet（局域网技术）、PPP（点对点协议）。

###### 网络层 - 数据包(Packet)


- 决定数据的物理路径。

- 负责路由、转发和逻辑地址映射。

- 网络层协议包括：IP（为数据包提供路径选择）、ICMP（用于错误报告和诊断）。

###### 数据链路层 - 帧(Frame)


- 提供节点到节点的数据传输。

- 负责数据帧的创建、传输和接收。

- 进行错误检测和纠正。

- 数据链路层协议包括：Ethernet（局域网技术）、PPP（点对点协议）。

###### 物理层 - 比特(Bit)


- 传输原始比特流。

- 定义硬件设备、传输介质和信号类型。

- 负责电气、机械、过程和功能特性。

- 包括：电缆类型、连接器、频率、脉冲编码等。

##### TCP/IP 参考模型


###### 应用层


- 包含高层协议和应用程序。

- 负责提供应用服务，如HTTP、FTP、SMTP等。

- 在TCP/IP模型中，应用层整合了OSI模型的应用层、表示层和会话层功能。

###### 传输层


- 提供端到端的通信服务。

- 包含TCP（传输控制协议）和UDP（用户数据报协议）。

- TCP提供可靠、有序的数据传输，而UDP提供快速但不可靠的传输。

###### 网络层（又称互联网层）


- 负责数据包的寻址和路由。

- 使用IP协议进行数据传输。

- 包括ICMP（用于错误和信息传递）和ARP（地址解析协议）。

###### 网络接口层（又称链路层）


- 处理数据帧的实际传输。

- 包括具体的物理网络接口，如以太网、Wi-Fi等。

- 相当于OSI模型的物理层和数据链路层的结合。

## 二、物理层 - bit


### 基本概念


#### 四大特性


##### 机械特性


###### 结构样式


##### 电气特性


###### 电压大小，传输介质等


##### 功能特性


###### 传输信号的种类


- 光信号

- 电信号

- 替他信号

##### 过程特性


###### 实现不同功能所发射的信号的顺序


#### 两种信号


##### 模拟信号（连续）


###### 特定频段的信号


- 有更加丰富的表达形式

###### 容易被外界环境影响


##### 数字信号（离散）


###### 传输二进制信号


###### 抗干扰能力强


#### 调制和编码


##### 调制


###### 模拟信号转换


##### 编码


###### 数字信号转换


###### 编码的步骤


- 采样

- 量化

- 编码

##### 区别


###### 数据可以通过调治转化成模拟信号，也可通过编码转换为数字信号


###### 数字数据可以通过数字发射器转换为数字信号（编码），也可通过调制器转换为模拟信号（调制）


###### 模拟数据可以通过PCM编码器转化为数字信号（编码），也可以通过放大器调制器转化为模拟信号（调制）


#### 传输介质


##### 双绞线


###### 屏蔽双绞线（STP）


- 抗干扰强 - 贵

###### 非屏蔽双绞线（UTP）


- 抗干扰差 - 便宜

###### 制作标准


- 568B

  - 橙白-橙-绿白-蓝-蓝白-绿-棕白-棕

- 568A

  - [1,3] [2,6]调换

    - 绿白-绿-橙白-蓝-蓝白-橙-棕白-棕

###### 按照频率和信噪比进行分类


- 双绞线常见的有三类线，五类线和超五类线，以及六类线，前者线径细而后者线径粗，具体型号如下：
1）一类线（CAT1）：线缆最高频率带宽是750kHZ，用于报警系统，或只适用于语音传输（一类标准主要用于八十年代初之前的电话线缆），不用于数据传输。
2）二类线（CAT2）：线缆最高频率带宽是1MHZ，用于语音传输和最高传输速率4Mbps的数据传输，常见于使用4MBPS规范令牌传递协议的旧的令牌网。
3）三类线（CAT3）：指在ANSI和EIA/TIA568标准中指定的电缆，该电缆的传输频率16MHz，最高传输速率为10Mbps（10Mbit/s），主要应用于语音、10Mbit/s以太网（10BASE-T）和4Mbit/s令牌环，最大网段长度为100m，采用RJ形式的连接器，已淡出市场。
4）四类线（CAT4）：该类电缆的传输频率为20MHz，用于语音传输和最高传输速率16Mbps（指的是16Mbit/s令牌环）的数据传输，主要用于基于令牌的局域网和10BASE-T/100BASE-T。最大网段长为100m，采用RJ形式的连接器，未被广泛采用。
5）五类线（CAT5）：该类电缆增加了绕线密度，外套一种高质量的绝缘材料，线缆最高频率带宽为100MHz，最高传输率为100Mbps，用于语音传输和最高传输速率为100Mbps的数据传输，主要用于100BASE-T和1000BASE-T网络，最大网段长为100m，采用RJ形式的连接器。这是最常用的以太网电缆。在双绞线电缆内，不同线对具有不同的绞距长度。通常，4对双绞线绞距周期在38.1mm长度内，按逆时针方向扭绞，一对线对的扭绞长度在12.7mm以内。
6）超五类线（CAT5e）：超5类具有衰减小，串扰少，并且具有更高的衰减与串扰的比值（ACR）和信噪比（SNR）、更小的时延误差，性能得到很大提高。超5类线主要用于千兆位以太网（1000Mbps）。
7）六类线（CAT6）：该类电缆的传输频率为1MHz～250MHz，六类布线系统在200MHz时综合衰减串扰比（PS-ACR）应该有较大的余量，它提供2倍于超五类的带宽。六类布线的传输性能远远高于超五类标准，最适用于传输速率高于1Gbps的应用。六类与超五类的一个重要的不同点在于：改善了在串扰以及回波损耗方面的性能，对于新一代全双工的高速网络应用而言，优良的回波损耗性能是极重要的。六类标准中取消了基本链路模型，布线标准采用星形的拓扑结构，要求的布线距离为：永久链路的长度不能超过90m，信道长度不能超过100m。
8）超六类或6A（CAT6A）：此类产品传输带宽介于六类和七类之间，传输频率为500MHz，传输速度为10Gbps，标准外径6mm。和七类产品一样，国家还没有出台正式的检测标准，只是行业中有此类产品，各厂家宣布一个测试值。
9）七类线（CAT7）：传输频率为600MHz，传输速度为10Gbps，单线标准外径8mm，多芯线标准外径6mm。
类型数字越大、版本越新，技术越先进、带宽也越宽，当然价格也越贵。这些不同类型的双绞线标注方法是这样规定的，如果是标准类型则按CATx方式标注，如常用的五类线和六类线，则在线的外皮上标注为CAT 5、CAT 6。而如果是改进版，就按xe方式标注，如超五类线就标注为5e（字母是小写，而不是大写）。

###### 传输距离大概在200-500m之间


##### 光纤


###### 单模光纤


- 距离：>>5KM

- 在光纤通信中，单模光纤（SMF）是一种在横向模式直接传输光信号的光纤。单模光纤运行在100M/s或1 G/s的数据速率，传输距离都可以达到至少5公里。通常情况下，单模光纤用于远程信号传输。

###### 多模光纤


- 距离：<2KM

- 多模光纤（MMF）主要用于短距离的光纤通信，如在建筑物内或校园里。典型的传输速度是100M/s，传输距离可达2km（100BASE-FX），1 G/s可达1000m，10 G/s可达550m。

##### 同轴电缆


###### 淘汰


##### 无线


###### 无线信号频段为IEEE802.11


#### 三大部分


##### 源系统


###### 发送端


##### 传输系统


###### 传输过程中的各种介质


##### 目的系统


###### 接收端


### 基本通讯技术


#### 四中信道复用技术


##### 复用技术


###### 复用技术是指一种在传输路径上综合多路信道，然后恢复原机制或解除终端各信道复用技术的过程


- 将多种不同的信号在同一信道上进行传播，复用技术主要用于解决不同信号传输时应该如何区分

##### 频分复用FDM


###### 划分不同频率来并行传输信号


##### 时分复用TDM


###### 划分不同的时间段来传输信号


##### 码分复用CDM


###### 对数据进行编码
在同一时间同一频率根据传输的数据码进行区分


##### 波分复用WDM


###### 根据光线波长来进行传输（合波器耦合）


#### 数据传输方式


##### 通过同时间传输数量分为


###### 串行传输


- 数据一位一位地通过单一信道传输。

  - 更适合长距离传输，因为串行传输在长距离时信号干扰小。

  - 数据传输速率较低，但可靠性高。

  - 常用场景：USB、光纤通信、RS-232。

###### 并行传输


- 数据多个位同时通过多条信道传输。

  - 数据传输速率较高，但容易受干扰，传输距离受限。

  - 适合短距离高速度的传输。

  - 常用场景：计算机内部总线、老式打印机接口（如Centronics并口）。

##### 通过数据保温的双方行为分为


###### 同步传输


- 数据按照统一的时钟信号节奏传输。

  - 传输效率高，数据流是连续的。

  - 需要发送方和接收方提前协商并保持同步。

  - 适合大数据量、高速传输的场景。

  - 常用协议：SPI、I2C、以太网。

###### 异步传输


- 数据不依赖时钟信号，数据包中包含起始位和停止位，用来标记传输的开始和结束。

  - 传输效率较低，数据之间有间隙。

  - 不需要严格的同步机制，简单易实现。

  - 适合小数据量、不连续传输的场景。

  - 常用协议：UART、RS-232。

##### 通过传输的信号分为


###### 基带传输


- 传输数字信号

###### 频带传输


- 传输模拟信号

  - 300-3400HZ

##### 传输方向


###### 单工-双工-全双工


##### 传输对象


###### 单播-多播-广播


## 第一二章难点补充


### 理解OSI 参考模型的工作模式和特点


### 总线型和他的朋友们


## 三、数据链路层


### 基本概论


#### 概念


##### 数据链路层是物理层和网络层之间的协议，提供相邻节点的可靠数据传输


#### 帧的概念


##### 数据链路层的协议数据单元


##### 组成


###### 帧头


- 源MAC地址、目的MAC 地址、类型

  - MAC 地址

    - 48位

###### 数据


###### 帧尾


- 校验

#### 以太网数据真中的MAC和LLC


##### MAC


###### MAC介质控制访问


###### 作用


- 数据帧的封装/卸装

- 帧的寻址和识别

- 帧的接收和发送

- 链路的管理

- 帧的差错控制等

- MAC子层的存在屏蔽了不同物理链路种类的差异性

##### LLC


###### LLC逻辑控制访问


###### 作用


- 为传输可靠性保障和控制

- 数据包的分段与重组

- 数据包的顺序传输

##### 注解


###### 在以太网中，MAC（介质访问控制）和LLC（逻辑链路控制）是数据链路层的两个子层，分别承担不同的职责，共同实现可靠的数据传输：
MAC 子层（Media Access Control）：
主要负责设备与物理介质之间的直接交互，管理数据帧的发送与接收。其核心功能包括：介质访问控制（如CSMA/CD协议）、帧的封装和解封装（添加源地址、目的地址、帧校验序列FCS）、冲突检测与处理等。MAC 子层与物理层紧密结合，强调硬件层面的高效数据传输，确保数据能够正确发送到目标设备。
LLC 子层（Logical Link Control）：
提供逻辑接口以支持多个上层协议的并存，负责帧的多路复用、解复用、协议标识（如IPv4、IPv6）和有限的错误检测与流量控制（部分模式下）。LLC 独立于底层硬件，与上层网络协议（如IP协议）直接交互，为网络层提供一个通用的服务接口，从而提高网络的灵活性和兼容性。
在以太网帧结构中，MAC 子层负责帧头部和尾部的管理（如源/目标MAC地址、FCS校验），LLC 子层则主要作用于数据部分，标识承载的具体协议。MAC 关注低层硬件通信，LLC 关注高层协议对接，两者分工协作，共同完成数据链路层的传输任务。


#### 数据链路层的两种传播方式


##### 单播


##### 广播


#### 数据链路层的三个基本问题


##### 封装成帧


###### 封装成帧是指将从网络层（如IP协议）接收到的数据包（Packet）封装成帧（Frame），以便能够在物理层传输。帧是数据链路层的基本传输单位。


##### 透明传输


###### 透明传输是指在数据链路层，传输的帧数据应当能够穿越网络中的传输介质，而不受到介质本身数据的影响，也就是说，数据传输的内容对于用户或上层协议是透明的。


##### 差错检测


###### 差错检测是在数据链路层通过某些机制，确保传输的帧没有在传输过程中受到错误的影响。这通常通过在数据帧中加入冗余信息来实现。


- 奇数校验

- 偶数校验

- CRC

#### 局域网中的设备


##### 集线器


###### 集线器（Hub） 是一种网络设备，用于将多个计算机或网络设备连接在一起，形成一个局域网（LAN）。它的作用是将接收到的数据从一个端口转发到其他所有端口。集线器是网络中最基本的设备之一，但随着技术的发展，集线器已经逐渐被功能更强大的设备如**交换机（Switch）**所取代。


- 物理层

##### 交换机


###### 交换机（Switch） 是一种网络设备，主要用于在计算机网络中转发数据包，尤其是在局域网（LAN）中连接多个设备。与集线器（Hub）不同，交换机具有更高的智能性，能够根据数据包的目标地址（如MAC地址）来决定如何将数据包转发到正确的设备，从而提高网络的效率和性能。


- 数据链路层

##### 网桥


###### 网桥（Bridge） 是一种网络设备，主要用于连接两个或多个局域网（LAN）或网络段，从而实现数据的转发和通信。它工作在OSI模型的数据链路层（第2层），其作用是通过过滤和转发数据帧来减少网络拥塞、提高网络性能，并隔离不同的网络段。


- 之间

### 通信协议


#### 冲突域和广播域


##### 冲突域


###### 冲突域是指网络中，多个设备通过共享同一带宽传输数据时，可能发生冲突的区域。在一个冲突域内，如果两个设备同时发送数据，数据包就会发生碰撞，导致数据丢失，必须重新传输。冲突域通常受到网络设备（如集线器、交换机、路由器等）类型的影响。


###### 是指由于带宽共享而导致的数据碰撞区域，通常由集线器引入。每个端口是一个独立的冲突域（如交换机端口）。一个网络设备（如集线器或交换机的端口）将属于一个冲突域。


##### 广播域


###### 广播域是指网络中所有能够接收到一个设备发送的广播帧（broadcast frame）的区域。在同一个广播域内，当一个设备发送广播数据帧时，网络中所有设备都会接收到该帧并处理。


###### 是指广播数据包传播的区域，所有设备都能接收到广播数据帧。广播域的大小可以通过配置VLAN或使用路由器来控制。


##### 区别


###### 冲突域关注的是数据包的碰撞问题，主要影响设备之间的通信效率，特别是在共享带宽的情况下。


###### 广播域关注的是广播数据包的传播范围，广播数据包会传递给同一广播域内的所有设备，而不会超出该范围。


#### 虚拟局域网（实验）VLAN


##### VLAN（虚拟局域网，Virtual Local Area Network） 是一种通过网络设备（如交换机）划分逻辑上独立的局域网的技术。即使设备位于不同的物理位置，VLAN允许它们像在同一局域网内一样进行通信。


##### 优点和目的


###### 广播控制：通过VLAN，广播流量只会在同一VLAN内传播，从而减少了不必要的广播风暴，提高了网络的性能。


###### 网络隔离与安全：VLAN可以将不同部门、功能组或团队的设备隔离开来，增强网络的安全性，防止未经授权的设备访问敏感信息。


###### 简化网络管理：VLAN通过逻辑分割网络，方便管理员对网络进行划分、管理和维护。例如，设备物理位置发生变化时，只需要修改VLAN配置，而无需重新布线。


###### 提高网络效率：VLAN能够有效减少网络中的冲突域和广播域，提升带宽利用率。


###### 目的是提高网络的管理性、安全性和效率，通过将不同的网络设备分配到不同的广播域，控制广播流量和减少网络拥堵。


##### 划分VLAN的方式


###### 基于端口的VLAN：最常见的VLAN类型，通过交换机的物理端口来划分VLAN。每个交换机端口分配给一个特定的VLAN，所有连接到该端口的设备都属于这个VLAN。


- Access

  - 只允许通过一个VLAN

- Trunk

  - 允许通过多个VLAN

- hybird

###### 基于子网的 VLAN ：通过将网络的子网与 VLAN 结合起来进行网络划分。每个子网对应一个 VLAN，网络中的每个 VLAN 都有一个或多个子网。


###### 基于MAC地址的VLAN：这种VLAN类型根据设备的MAC地址来决定设备所属的VLAN。即便设备更换了端口，VLAN信息仍然保持不变。


###### 基于协议的VLAN：根据不同的网络协议（如IP、IPX）将设备分配到不同的VLAN中。


###### 基于匹配策略的VLAN：根据预设的策略（如安全需求、流量需求等）划分VLAN。


#### CSMA/CD


##### CSMA/CD（载波监听多路访问与碰撞检测）是一种网络访问控制协议，主要用于局域网（LAN）。


###### 总线型


##### 四大要点


###### 先听先发


###### 边听边发


###### 冲突停止


###### 延迟后发


#### PPP


##### PPP（点对点协议）是一种数据链路层协议，用于通过串行链路进行数据通信。它的主要作用是在两个网络设备之间建立直接的、点对点的连接，并提供数据封装、地址协商、错误检测等功能。


###### 单播


##### PPP 最初设计是为两段通信提供一种封装协议


#### CRC


##### CRC（Cyclic Redundancy Check，循环冗余检验）是一种广泛使用的错误检测技术，主要用于数字网络和存储设备中，用来检测数据在传输或存储过程中是否发生了错误。它通过对数据进行特定的算法计算，生成一个校验值（通常称为CRC码或校验码），这个校验值随数据一起传输或存储。接收方再通过相同的算法重新计算校验值，并与接收到的校验值进行比较。如果两个校验值一致，说明数据没有错误；如果不一致，则说明数据在传输或存储过程中发生了错误。


## 四、网络层


### 网络层的作用（单位：分组）


#### 网络层的目的是实现两个端到端系统之间的数据透明传输，具体功能包括寻址和路由器选择、连接的建立、保持和终止等。它提供的服务使传输层不需要了解网络中的数据传输和交换技术


##### 提供端到端服务


### 网际协议IP


#### ARP 地址解析协议


##### 根据IP地址获取物理地址


#### RARP反地址解析协议


#### ICMP网际控制报文协议


##### 通过ICMP传输控制消息，控制消息是指网络通不通，主机是否可达，路由是否可用等网络本身的消息


#### IGMP网际组管理协议


##### 使用与管理网络协议多播组成员的一种通信协议。IP 主机和相邻的路由器利用IGMP来创建多播组的组成员。主播方式解决了单播情况下数据重复拷贝及宽带重复占用问题，也解决了广播方式下的带宽资源浪费


### IP 地址


#### IP 地址的概念


##### IP地址


###### IP 地址是IP 协议提供的一种统一的地址格式，它为互联网上的每一个网络和每一台主机分配一个逻辑地址，以此来屏蔽物理地址的差异


##### 组成


###### 一个IP 地址有四个字节，三十二位，一般使用点分十进制的方式表现


##### IP 地址和MAC地址的区别


#### IP 地址的组成


#### 子主题


### 子网划分


### 网络层的路由


### 路由器


